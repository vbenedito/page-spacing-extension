function h(t,e,n,o=!0){const l=document.createElement("div");l.textContent=t,l.className="tooltip",l.style.left=`${e}px`,l.style.top=`${n}px`,document.body.appendChild(l),o&&setTimeout(()=>l.remove(),3e3)}const s={firstSelectedLine:null,secondSelectedLine:null,isCommandPressed:!1,isShiftPressed:!1,selectedElements:[],resetSelections(){this.firstSelectedLine=null,this.secondSelectedLine=null,this.selectedElements=[]}},y=t=>{if(!s.isShiftPressed)return;const e=t.target;if(!e)return;const n=e.getBoundingClientRect(),o=window.getComputedStyle(e),l={tagName:e.tagName,backgroundColor:o.backgroundColor,color:o.color,fontSize:o.fontSize,padding:o.padding,margin:o.margin,gap:o.gap};h(`Tag: ${l.tagName}
      Background: ${l.backgroundColor}
      Color: ${l.color}
      Font Size: ${l.fontSize}
      Padding: ${l.padding}
      Margin: ${l.margin}
      Gap: ${l.gap}  
    `,n.x+n.width/2,n.y-20)};function b(t,e,n){const o=document.createElement("div");switch(o.textContent=`${t}px`,o.style.position="fixed",o.style.backgroundColor="black",o.style.color="white",o.style.padding="2px 5px",o.style.borderRadius="4px",o.style.zIndex="9999",n){case"top-bottom":o.style.left=`${(e.left+e.right)/2}px`,o.style.top=`${e.top-t}px`;break;case"bottom-top":o.style.left=`${(e.left+e.right)/2}px`,o.style.top=`${e.bottom+t}px`;break;case"left-right":o.style.left=`${e.left-t}px`,o.style.top=`${(e.top+e.bottom)/2}px`;break;case"right-left":o.style.left=`${e.right+t}px`,o.style.top=`${(e.top+e.bottom)/2}px`;break}document.body.appendChild(o),setTimeout(()=>{o.remove()},3e3)}function C(t,e){const n=t.getBoundingClientRect(),o=e.getBoundingClientRect(),l=Math.abs(n.top-o.bottom),c=Math.abs(n.bottom-o.top),r=Math.abs(n.left-o.right),g=Math.abs(n.right-o.left),i=[{type:"top-bottom",value:l},{type:"bottom-top",value:c},{type:"left-right",value:r},{type:"right-left",value:g}].reduce((u,p)=>u.value<p.value?u:p);console.log(`Closest edges: ${i.type}, Distance: ${i.value}px`),b(i.value,n,i.type)}function v(t){t.style.outline="2px solid blue",setTimeout(()=>{t.style.outline=""},2e3)}function E(t){s.selectedElements.length<2&&(s.selectedElements.push(t),v(t),console.log(`Element selected: ${t.tagName}`)),s.selectedElements.length===2&&(C(s.selectedElements[0],s.selectedElements[1]),s.selectedElements=[])}function k(){const t=["Meta","Control"],e=["Shift"];document.addEventListener("keydown",n=>{e.includes(n.key)&&(s.isShiftPressed=!0,console.log("shift key pressed.")),t.includes(n.key)&&(s.isCommandPressed=!0,console.log("Command/Control key pressed."))}),document.addEventListener("keyup",n=>{e.includes(n.key)&&(s.isShiftPressed=!1,console.log("shift key released.")),t.includes(n.key)&&(s.isCommandPressed=!1,s.selectedElements=[],console.log("Command/Control key released."))})}function x(){document.addEventListener("mouseover",t=>{s.isShiftPressed&&y(t)},{capture:!0})}function $(){document.addEventListener("click",t=>{if(s.isCommandPressed){t.preventDefault(),t.stopPropagation();const e=t.target;E(e)}},{capture:!0})}function m(t,e,n){t.style.bottom=`${e}px`,t.className="page-ruler-button",t.style.backgroundColor=n}let L=0;function f(t){const e=document.createElement("div");e.dataset.id=`line-${L++}`,e.className=`page-ruler-line page-ruler-line--${t}`,t==="horizontal"?(e.style.top="50px",e.style.left="0"):(e.style.left="50px",e.style.top="0"),S(e,t),document.body.appendChild(e)}function S(t,e){let n=!1,o=0;t.addEventListener("mousedown",l=>{n=!0,o=e==="horizontal"?l.clientY:l.clientX}),document.addEventListener("mousemove",l=>{if(!n)return;const c=e==="horizontal"?l.clientY-o:l.clientX-o,r=parseInt(t.style[e==="horizontal"?"top":"left"],10);t.style[e==="horizontal"?"top":"left"]=`${r+c}px`,o=e==="horizontal"?l.clientY:l.clientX}),document.addEventListener("mouseup",()=>n=!1)}const a=document.createElement("button");a.textContent="New horizontal line";m(a,10,"blue");a.addEventListener("click",()=>f("horizontal"));const d=document.createElement("button");d.textContent="New vertical line";m(d,60,"green");d.addEventListener("click",()=>f("vertical"));const z=()=>{document.body.appendChild(a),document.body.appendChild(d),console.log("Buttons added to the page.")};console.log("Content Script activated!");chrome.runtime.onMessage.addListener(t=>{t.action==="create_buttons"&&(k(),x(),$(),z())});
