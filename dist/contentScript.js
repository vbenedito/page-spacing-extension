function v(e,o,n){e.style.bottom=`${o}px`,e.className="page-ruler-button",e.style.backgroundColor=n}let y=0;function h(e){const o=document.createElement("div");if(o.dataset.id=`line-${y++}`,o.className=`page-ruler-line page-ruler-line--${e}`,e==="horizontal"){const n=window.innerHeight/2;o.style.top=`${n+window.scrollY}px`,o.style.left="0"}else{const n=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);o.style.left="50px",o.style.top="0",o.style.height=`${n}px`}b(o,e),document.body.appendChild(o)}function b(e,o){let n=!1,t=0;e.addEventListener("mousedown",s=>{n=!0,t=o==="horizontal"?s.clientY:s.clientX}),document.addEventListener("mousemove",s=>{if(!n)return;const r=o==="horizontal"?s.clientY-t:s.clientX-t,d=parseInt(e.style[o==="horizontal"?"top":"left"],10);e.style[o==="horizontal"?"top":"left"]=`${d+r}px`,t=o==="horizontal"?s.clientY:s.clientX}),document.addEventListener("mouseup",()=>n=!1)}const u=document.createElement("button");u.textContent="New horizontal line";v(u,10,"blue");u.addEventListener("click",()=>h("horizontal"));const g=document.createElement("button");g.textContent="New vertical line";v(g,60,"green");g.addEventListener("click",()=>h("vertical"));const C=()=>{document.body.appendChild(u),document.body.appendChild(g),console.log("Buttons added to the page.")};function x(e,o,n){const t=document.createElement("div");return t.textContent=e,t.style.position="fixed",t.style.left=`${o}px`,t.style.top=`${n}px`,t.style.padding="8px",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.borderRadius="4px",t.style.fontSize="12px",t.style.pointerEvents="none",t.style.whiteSpace="pre-line",t.dataset.ignoreTooltip="true",document.body.appendChild(t),t}function f(e){e.parentNode&&e.parentNode.removeChild(e)}const l={firstSelectedLine:null,secondSelectedLine:null,isCommandPressed:!1,isShiftPressed:!1,selectedElements:[],resetSelections(){this.firstSelectedLine=null,this.secondSelectedLine=null,this.selectedElements=[]}};function $(){let e=null;const o=s=>{if(!l.isShiftPressed){e&&(f(e),e=null);return}const r=s.target;if(!r||r.dataset.ignoreTooltip)return;const d=r.getBoundingClientRect(),a=window.getComputedStyle(r),i={tagName:r.tagName,backgroundColor:a.backgroundColor,color:a.color,fontSize:a.fontSize,padding:a.padding,margin:a.margin,gap:a.gap};e?(e.innerHTML=`
        <div><strong>Tag</strong>: ${i.tagName}</div>
        <div><strong>Background</strong>: ${i.backgroundColor}</div>
        <div><strong>Color</strong>: ${i.color}</div>
        <div><strong>Font Size</strong>: ${i.fontSize}</div>
        <div><strong>Padding</strong>: ${i.padding}</div>
        <div><strong>Margin</strong>: ${i.margin}</div>
        <div><strong>Gap</strong>: ${i.gap}</div>
      `,e.style.left=`${d.x+d.width/2}px`,e.style.top=`${d.y-20}px`):e=x(`<div><strong>Tag</strong>: ${i.tagName}</div>
        <div><strong>Background</strong>: ${i.backgroundColor}</div>
        <div><strong>Color</strong>: ${i.color}</div>
        <div><strong>Font Size</strong>: ${i.fontSize}</div>
        <div><strong>Padding</strong>: ${i.padding}</div>
        <div><strong>Margin</strong>: ${i.margin}</div>
        <div><strong>Gap</strong>: ${i.gap}</div>`,d.x+d.width/2,d.y-20)},n=s=>{s.key==="Shift"&&(l.isShiftPressed=!0)},t=s=>{s.key==="Shift"&&(l.isShiftPressed=!1,e&&(f(e),e=null))};document.addEventListener("mousemove",o),document.addEventListener("keydown",n),document.addEventListener("keyup",t)}function k(e,o,n){const t=document.createElement("div");switch(t.textContent=`${e}px`,t.style.position="fixed",t.style.backgroundColor="black",t.style.color="white",t.style.padding="2px 5px",t.style.borderRadius="4px",t.style.zIndex="9999",n){case"top-bottom":t.style.left=`${(o.left+o.right)/2}px`,t.style.top=`${o.top-e}px`;break;case"bottom-top":t.style.left=`${(o.left+o.right)/2}px`,t.style.top=`${o.bottom+e}px`;break;case"left-right":t.style.left=`${o.left-e}px`,t.style.top=`${(o.top+o.bottom)/2}px`;break;case"right-left":t.style.left=`${o.right+e}px`,t.style.top=`${(o.top+o.bottom)/2}px`;break}document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)}function E(e,o){const n=e.getBoundingClientRect(),t=o.getBoundingClientRect(),s=Math.abs(n.top-t.bottom),r=Math.abs(n.bottom-t.top),d=Math.abs(n.left-t.right),a=Math.abs(n.right-t.left),c=[{type:"top-bottom",value:s},{type:"bottom-top",value:r},{type:"left-right",value:d},{type:"right-left",value:a}].reduce((p,m)=>p.value<m.value?p:m);console.log(`Closest edges: ${c.type}, Distance: ${c.value}px`),k(c.value,n,c.type)}function L(e){e.style.outline="2px solid blue",setTimeout(()=>{e.style.outline=""},2e3)}function S(e){l.selectedElements.length<2&&(l.selectedElements.push(e),L(e),console.log(`Element selected: ${e.tagName}`)),l.selectedElements.length===2&&(E(l.selectedElements[0],l.selectedElements[1]),l.selectedElements=[])}function w(){const e=["Meta","Control"],o=["Shift"];document.addEventListener("keydown",n=>{o.includes(n.key)&&(l.isShiftPressed=!0,console.log("shift key pressed.")),e.includes(n.key)&&(l.isCommandPressed=!0,console.log("Command/Control key pressed."))}),document.addEventListener("keyup",n=>{o.includes(n.key)&&(l.isShiftPressed=!1,console.log("shift key released.")),e.includes(n.key)&&(l.isCommandPressed=!1,l.selectedElements=[],console.log("Command/Control key released."))})}function z(){document.addEventListener("click",e=>{if(l.isCommandPressed){e.preventDefault(),e.stopPropagation();const o=e.target;S(o)}},{capture:!0})}chrome.runtime.onMessage.addListener((e,o,n)=>{console.log("Message received in content script:",e),e.action==="active_lines_buttons"?C():e.action==="active_hover_inspect"?$():e.action==="active_measure_distance"&&(w(),z()),n({status:"Action executed"})});
