function h(t,e,l,o=!0){const n=document.createElement("div");n.textContent=t,n.style.position="absolute",n.style.left=`${e}px`,n.style.top=`${l}px`,n.style.padding="5px 10px",n.style.backgroundColor="rgba(0, 0, 0, 0.8)",n.style.color="white",n.style.borderRadius="5px",n.style.fontSize="14px",n.style.zIndex="9999",n.style.pointerEvents="none",n.style.transform="translate(-50%, -50%)",document.body.appendChild(n),o&&setTimeout(()=>n.remove(),3e3)}const f=()=>{let t=!1;document.addEventListener("keydown",()=>{t=!0,console.log("Meta and Shift keys pressed together. Hover info activated.")}),document.addEventListener("keyup",()=>{t=!1,console.log("Hover info deactivated.")}),document.addEventListener("mouseover",e=>{if(!t)return;const l=e.target;if(!l)return;const o=l.getBoundingClientRect(),n=window.getComputedStyle(l),s={tagName:l.tagName,height:n.height,width:n.width,backgroundColor:n.backgroundColor,color:n.color,fontSize:n.fontSize};console.log(s,o),h(`Tag: ${s.tagName}
Size: ${s.width} x ${s.height}
Background: ${s.backgroundColor}
Color: ${s.color}
Font Size: ${s.fontSize}`,o.x+o.width/2,o.y-20)})};function v(t,e,l){const o=document.createElement("div");switch(o.textContent=`${t}px`,o.style.position="absolute",o.style.backgroundColor="black",o.style.color="white",o.style.padding="2px 5px",o.style.borderRadius="4px",o.style.zIndex="9999",l){case"top-bottom":o.style.left=`${(e.left+e.right)/2}px`,o.style.top=`${e.top-t}px`;break;case"bottom-top":o.style.left=`${(e.left+e.right)/2}px`,o.style.top=`${e.bottom+t}px`;break;case"left-right":o.style.left=`${e.left-t}px`,o.style.top=`${(e.top+e.bottom)/2}px`;break;case"right-left":o.style.left=`${e.right+t}px`,o.style.top=`${(e.top+e.bottom)/2}px`;break}document.body.appendChild(o),setTimeout(()=>{o.remove()},3e3)}function x(t,e){const l=t.getBoundingClientRect(),o=e.getBoundingClientRect(),n=Math.abs(l.top-o.bottom),s=Math.abs(l.bottom-o.top),r=Math.abs(l.left-o.right),g=Math.abs(l.right-o.left),d=[{type:"top-bottom",value:n},{type:"bottom-top",value:s},{type:"left-right",value:r},{type:"right-left",value:g}].reduce((u,p)=>u.value<p.value?u:p);console.log(`Closest edges: ${d.type}, Distance: ${d.value}px`),v(d.value,l,d.type)}const i={firstSelectedLine:null,secondSelectedLine:null,isCommandPressed:!1,selectedElements:[],resetSelections(){this.firstSelectedLine=null,this.secondSelectedLine=null,this.selectedElements=[]}};function b(t){t.style.outline="2px solid blue",setTimeout(()=>{t.style.outline=""},2e3)}function C(t){i.selectedElements.length<2&&(i.selectedElements.push(t),b(t),console.log(`Element selected: ${t.tagName}`)),i.selectedElements.length===2&&(x(i.selectedElements[0],i.selectedElements[1]),i.selectedElements=[])}function E(){const t=["Tab","Meta","Alt"];document.addEventListener("keydown",e=>{(t.includes(e.key)||e.ctrlKey)&&(i.isCommandPressed=!0,console.log("Command key pressed."),(e.key==="Meta"||e.ctrlKey)&&e.shiftKey&&(console.log("Meta and Shift keys pressed together. Hover info activated."),f()))}),document.addEventListener("keyup",e=>{e.metaKey||(i.isCommandPressed=!1,i.selectedElements=[],console.log("Command key released."))})}function k(){document.addEventListener("click",t=>{if(i.isCommandPressed){t.preventDefault(),t.stopPropagation();const e=t.target;C(e)}},{capture:!0})}function m(t,e,l){t.style.position="fixed",t.style.top=`${e}px`,t.style.left="10px",t.style.zIndex="9999",t.style.backgroundColor=l,t.style.color="white",t.style.border="none",t.style.padding="10px",t.style.cursor="pointer"}let L=0;function y(t){const e=document.createElement("div");e.dataset.id=`line-${L++}`,e.style.position="absolute",e.style.zIndex="9999",e.style.cursor="move",e.style.backgroundColor=t==="horizontal"?"red":"blue",t==="horizontal"?(e.style.top="50px",e.style.left="0",e.style.width="100%",e.style.height="2px"):(e.style.left="50px",e.style.top="0",e.style.width="2px",e.style.height="100%"),e.addEventListener("click",()=>{console.log("Key not pressed, ignoring click.")}),$(e,t),document.body.appendChild(e)}function $(t,e){let l=!1,o=0;t.addEventListener("mousedown",n=>{l=!0,o=e==="horizontal"?n.clientY:n.clientX}),document.addEventListener("mousemove",n=>{if(!l)return;const s=e==="horizontal"?n.clientY-o:n.clientX-o,r=parseInt(t.style[e==="horizontal"?"top":"left"],10);t.style[e==="horizontal"?"top":"left"]=`${r+s}px`,o=e==="horizontal"?n.clientY:n.clientX}),document.addEventListener("mouseup",()=>l=!1)}const a=document.createElement("button");a.textContent="Add Horizontal Line";m(a,10,"blue");a.addEventListener("click",()=>y("horizontal"));const c=document.createElement("button");c.textContent="Add Vertical Line";m(c,50,"green");c.addEventListener("click",()=>y("vertical"));const z=()=>{document.body.appendChild(a),document.body.appendChild(c),console.log("Buttons added to the page.")};console.log("Content Script activated!");chrome.runtime.onMessage.addListener(t=>{t.action==="create_buttons"&&(E(),k(),z())});
